<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>亚宝药业采购共享平台</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/reset.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.validate.js"></script>
    <script src="js/cgh_js.js"></script>
    <script src="js/getParameter.js"></script>
	<script type="text/javascript" src="js/Calendar4.js"></script>
</head>
<body id="newsupplier2">
	<div class="newsupplier2_top_1">
	                <span rowspan="2">
	                    <input type="submit" value="隐藏" id="hide" class="register_btn" />
	                    <input type="submit" value="查询" id="search" class="register_btn" />
	                 </span>
	</div>
	<div id="searchdiv">
	
	    <div class="newsupplier2_top_2 clearfix">
	        <div class="newsupplier2_top_2_1">
	                <div class="dizhi">
	                    <span><label></label> 省/市：</span>
	                    <select id="provinceid" name="provinceid">
	
	                    </select>&nbsp;
	                    <select id="cityid" name="cityid">
	
	                    </select>
	                </div>
	        </div>
	        <div class="newsupplier2_top_2_1">
	            <span><label></label>编号：</span>
	            <input type="text" id="supplierno" name="supplierno" class="required"/>
	        </div>
	        <div class="newsupplier2_top_2_1">
	            <span><label></label>名称：</span>
	            <input type="text" id="name" name="name" class="required"/>
	        </div>
	        <div class="newsupplier2_top_2_1">
	            <span><label></label>手机号：</span>
	            <input type="text" id="phoneno" name="phoneno" class="required"/>
	        </div>
	        <div class="newsupplier2_top_2_1">
	            <span><label></label>座机号：</span>
	            <input type="text" id="tel" name="tel" class="required"/>
	        </div>
	        <div class="newsupplier2_top_2_1">
	            <span><label></label>传真号：</span>
	            <input type="text" id="fax" name="fax" class="required"/>
	        </div>
	        <div class="newsupplier2_top_2_1">
	            <span><label></label>审核状态：</span>
	            <select id="auditstatus" name="auditstatus">
	                        <option value ="99">全部</option>
	                        <option value ="0">未审核</option>
	                        <option value ="1">已审核</option>
	                        <option value ="2">审核中</option>
	            </select>
	        </div>
	        <div class="newsupplier2_top_2_1">
	            <span>类型：</span>
	            <select id="iscompany" name="iscompany">
	                        <option value ="99">全部</option>
	                        <option value ="1">公司</option>
	                        <option value ="0">个人</option>
	            </select>
	        </div>
	        <div class="newsupplier2_top_2_1">
	            <span><label></label>登记日期：</span>
	            <input type="text" id="createdate" name="createdate" class="required" onclick="new Calendar().show(this);"/>
	        </div>
	    </div>
    </div>
    <div class="newsupplier2_main clearfix supplier" style="display: block;">
        <iframe id="frame" src="" class="iframepurchase"></iframe>
    </div>
    <script>
	        $(function(){
	        	getProvince();
	        	$("#hide").click(function(){
	        		if($("#hide").val() == "隐藏"){
		        		$("#searchdiv").hide();
		        		$("#hide").val("显示");
	        		}else{
		        		$("#searchdiv").show();
		        		$("#hide").val("隐藏");
	        		}
	        	});
	        	$("#provinceid").change(function(){
	        		//alert("1");
	        		getCity();
	        	});
	        	$("#search").click(function(){
	        		var typeid = "";
	        		if($("#provinceid").val() > 0){
	        			if(typeid == ""){
	        				typeid = "provinceid="+ $("#provinceid").val();
	        			}else{
	        				typeid += "_provinceid="+ $("#provinceid").val();
	        			}
		        		if($("#cityid").val() > 0){
		        			if(typeid == ""){
		        				typeid = "cityid="+ $("#cityid").val();
		        			}else{
		        				typeid += "_cityid="+ $("#cityid").val();
		        			}
		        		}
	        		}
	        		if($("#supplierno").val() != ""){
	        			if(typeid == ""){
	        				typeid = "supplierno="+ $("#supplierno").val();
	        			}else{
	        				typeid += "_supplierno="+ $("#supplierno").val();
	        			}
	        		}
	        		if($("#name").val() != ""){
	        			if(typeid == ""){
	        				typeid = "name="+ $("#name").val();
	        			}else{
	        				typeid += "_name="+ $("#name").val();
	        			}
	        		}
	        		if($("#phoneno").val() != ""){
	        			if(typeid == ""){
	        				typeid = "phoneno="+ $("#phoneno").val();
	        			}else{
	        				typeid += "_phoneno="+ $("#phoneno").val();
	        			}
	        		}
	        		if($("#tel").val() != ""){
	        			if(typeid == ""){
	        				typeid = "tel="+ $("#tel").val();
	        			}else{
	        				typeid += "_tel="+ $("#tel").val();
	        			}
	        		}
	        		if($("#fax").val() != ""){
	        			if(typeid == ""){
	        				typeid = "fax="+ $("#fax").val();
	        			}else{
	        				typeid += "_fax="+ $("#fax").val();
	        			}
	        		}
	        		if($("#auditstatus").val() != 99){
	        			if(typeid == ""){
	        				typeid = "auditstatus="+ $("#auditstatus").val();
	        			}else{
	        				typeid += "_auditstatus="+ $("#auditstatus").val();
	        			}
	        		}
	        		if($("#iscompany").val() != 99){
	        			if(typeid == ""){
	        				typeid = "iscompany="+ $("#iscompany").val();
	        			}else{
	        				typeid += "_iscompany="+ $("#iscompany").val();
	        			}
	        		}
	        		if($("#createdate").val() != ""){
	        			if(typeid == ""){
	        				typeid = "createdate="+ $("#createdate").val();
	        			}else{
	        				typeid += "_createdate="+ $("#createdate").val();
	        			}
	        		}
	        		//alert(typeid);
	        		if(typeid == ""){
	        			var newurl = "supplierlist-main.html?idtype=searchwithlimit&typeid=0";
						document.getElementById('frame').src = newurl;
	        		}else{
	        			var newurl = "supplierlist-main.html?idtype=searchwithlimit&typeid="+ typeid;
						document.getElementById('frame').src = newurl;
	        		}
	        	});
		    });
		    
	        function getProvince(){
			  	var params = {
			  		'idtype': "all",
			  		'typeid': "0"
			  	};
			  	$.post("province/list.action", params, function(res){
			  		var provinces = res.provinces;
			  		var inner = "<option value=0>请选择</option>";
			  		if(provinces[0].id > 0){
			  			for(var i=0;i<provinces.length;i++){
			  				inner += "<option value="+ provinces[i].id +">"+ provinces[i].name +"</option>"
			  			}
			  			$("#provinceid").html(inner);
			  			getCity();
			  		}
			  	});
		  	}
		  	
		  	function getCity(){
				  	var params = {
				  		'idtype': "province",
				  		'typeid': $("#provinceid").val()
				  	};
				  	$.post("city/list.action", params, function(res){
				  		var citys = res.citys;
				  		var inner = "<option value=0>请选择</option>";
				  		if(citys[0].id > 0){
				  			for(var i=0;i<citys.length;i++){
				  				inner += "<option value="+ citys[i].id +">"+ citys[i].name +"</option>"
				  			}
				  			$("#cityid").html(inner);
				  		}
				  	});
		  	}
    </script>
</body>
</html>